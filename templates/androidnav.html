{% load static %}
{% csrf_token %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .col-1-7 {
            flex: 0 0 100%;
            max-width: 100%;
            background-color: rgb(255, 255, 255);
            padding: 20px; /* Add padding to improve mobile display */
        }

        .btndiv, .btndiv2 {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .custom-btn-group .btn {
            width: 100%; /* Adjust width to fill the container */
            margin-bottom: 16px;
        }

        .nav-image {
            width: 100%;
            max-width: 200px; /* Set max-width for responsiveness */
            margin: 0 auto; /* Center the logo */
        }
    </style>
</head>
<body>

<!-- first main column -->
<div class="col-1-7 text-white p-0">
    <img src="{% static 'app1/logo1.png' %}" alt="" class="nav-image">
    
    <div class="btndiv btn-group custom-btn-group" role="group">
        <a href="{% url 'home' %}" style="text-decoration: none;">
            <button type="button" class="btn {% if active_button == 'home' %}active{% endif %}" data-target="home">
                <i class="fas fa-home"></i> Home
            </button>
        </a>
        <a href="{% url 'community' %}" style="text-decoration: none;">
            <button type="button" class="btn {% if active_button == 'community' %}active{% endif %}" data-target="community">
                <i class="fas fa-users"></i> Community
            </button>
        </a>
        
        <a href="{% url 'profile' %}" style="text-decoration: none;">
            <button type="button" class="btn {% if active_button == 'profile' %}active{% endif %}" data-target="profile">
                <i class="fas fa-user"></i> Profile
            </button>
        </a>
    </div>  
    <div class="btndiv2 btn-group custom-btn-group" role="group">
        <a href="{% url 'account' %}" style="text-decoration: none;">
            <button type="button" class="btn {% if active_button == 'account' %}active{% endif %}" data-target="account">
                <i class="fas fa-cogs"></i> Account Settings
            </button>
        </a>
        <a href="{% url 'logout_confirm' %}" style="text-decoration: none;">
            <button id="logoutButton" onclick="confirmLogout()" class="btn" style="color: red; background-color: transparent;">
                <i class="fas fa-sign-out-alt"></i> Log Out
            </button>
        </a>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-rO4/5NBIB8i7jNcWIVp6N5pzknbEVpldM7aF8A+nyJPgcG8LWXOZxomlC+jzvqK+" crossorigin="anonymous"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const activeButton = "{{ active_button }}";

        function toggleActive(button, target) {
            const buttons = document.querySelectorAll('.custom-btn-group .btn');
            buttons.forEach(btn => btn.classList.remove('active'));

            const activeButtonElement = document.querySelector(`.custom-btn-group .btn[data-target='${activeButton}']`);
            if (activeButtonElement) {
                activeButtonElement.classList.add('active');
            }
        }

        toggleActive(null, activeButton);

        function confirmLogout() {
            console.log("Inside confirmLogout function");
            const confirmation = window.confirm("Are you sure you want to log out?");
            console.log("Confirmation:", confirmation);

            if (confirmation) {
                window.location.href = "{% url 'logout' %}";  
            }
        }
    });
</script>
</body>
</html>
